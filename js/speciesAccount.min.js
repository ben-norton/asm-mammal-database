var appendCountryLayerToMap,baseQuery,fetchIucnRange,gMapsConfig,initMap,worldPoliticalFusionTableId,indexOf=[].indexOf||function(n){for(var o=0,e=this.length;o<e;o++)if(o in this&&this[o]===n)return o;return-1};gMapsConfig={jsApiKey:"AIzaSyC_qZqVvNk6A6px4Q7BJQOOHqpnQNihSBA",jsApiSrc:"https://maps.googleapis.com/maps/api/js",jsApiInitCallbackFn:null,hasRunInitMap:!1},isNull(window.gMapsLocalKey)||(gMapsConfig.jsApiKey=window.gMapsLocalKey),baseQuery={query:{select:"json_4326",from:worldPoliticalFusionTableId="1uKyspg-HkChMIntZ0N376lMpRzduIjr85UYPpQ"},styles:[{polygonOptions:{fillColor:"#rrggbb",strokeColor:"#rrggbb",strokeWeight:"int"},polylineOptions:{strokeColor:"#rrggbb",strokeWeight:"int"}}]},appendCountryLayerToMap=function(n,o){var e,a,i,l,s,t,p,r,g,u,c;if(null==n&&(n={code:"US"}),null==o&&(o=gMapsConfig.map),null==("undefined"!=typeof google&&null!==google?google.maps:void 0))return console.debug("Loading Google Maps first ..."),r=gMapsConfig.jsApiSrc+"?key="+gMapsConfig.jsApiKey,"function"==typeof gMapsConfig.jsApiInitCallbackFn&&(r+="&callback="+gMapsConfig.jsApiInitCallbackFn.name),loadJS(r,function(){return appendCountryLayerToMap(n,o),!1}),!1;if(!(o instanceof google.maps.Map))return console.error("Invalid map object provided"),!1;if(i={code:"postal",postal:"postal",name:"name",country:"name"},"object"==typeof n){e=[];for(a in n)if(c=n[a],indexOf.call(Object.keys(i),a)>=0)if(isArray(c))for(s=0,p=c.length;s<p;s++)u=c[s],e.push("'"+i[a]+"' = '"+u+"'");else e.push("'"+i[a]+"' = '"+c+"'");g=e.join(" OR ")}else g=n;return l=baseQuery,l.query.where=g,(t=new google.maps.FusionTablesLayer(l)).setMap(o),{fusionQuery:l,layer:t,mapObj:o}},initMap=function(n,o){var e,a,i,l,s,t,p,r,g,u,c;return null==n&&(n="#species-note"),!0===gMapsConfig.hasRunInitMap?(console.debug("Map already initialized"),!1):null==("undefined"!=typeof google&&null!==google?google.maps:void 0)?(console.debug("Loading Google Maps first ..."),s=gMapsConfig.jsApiSrc+"?key="+gMapsConfig.jsApiKey,"function"==typeof gMapsConfig.jsApiInitCallbackFn&&(t=[this.getName(),"initMap"],p=gMapsConfig.jsApiInitCallbackFn.getName(),indexOf.call(t,p)<0&&(s+="&callback="+gMapsConfig.jsApiInitCallbackFn.getName())),loadJS(s,function(){return initMap(n),!1}),!1):$(n).exists()?($(n).removeClass("col-xs-12").addClass("col-xs-6"),e='<div id="taxon-range-map-container" class="col-xs-6 map-container google-map-container">\n  <div id="taxon-range-map" class="map google-map">\n  </div>\n</div>',$(n).after(e),i={center:{lat:null!=(r=null!=(g=window.locationData)?g.lat:void 0)?r:0,lng:null!=(u=null!=(c=window.locationData)?c.lng:void 0)?u:0},zoom:2},l=$("#taxon-range-map").get(0),a=new google.maps.Map(l,i),gMapsConfig.map=a,gMapsConfig.hasRunInitMap=!0,"function"==typeof o&&o(),a):(console.error("Invalid page layout to init map"),!1)},fetchIucnRange=function(n){var o;return null==n&&(n=window._activeTaxon),isNull(n.genus)||isNull(n.species),o={action:"iucn",taxon:n.genus.toTitleCase()+"%20"+n.species,iucn_endpoint:"species/countries/name/"},isNull(n.subspecies)||(o.taxon+="%20"+n.subspecies),$.get("api.php",buildQuery(o,"json")).done(function(n){return console.log("Got",n),!0!==n.status&&(console.warn(uri.urlString+"api.php?"+buildQuery(o)),!1)}).fail(function(n,o){return!1}),!1},$(function(){return!1});
//# sourceMappingURL=speciesAccount.min.js.map