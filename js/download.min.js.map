{"version":3,"sources":["../../coffee/download.coffee"],"names":["downloadCSVList","downloadHTMLList","getLastSearch","reEnableClosure","showDownloadChooser","$","find","removeAttr","canonicalTaxon","ref","uri","o","attr","search","isNull","window","_activeTaxon","genus","species","subspecies","console","warn","searchParams","lastSearch","useLastSearch","adjMonth","args","button","d","dateString","day","i","len","month","searchString","startTime","animateLoad","Date","now","_asm","progressTracking","estimate","error","length","p$","disabled","undefined","getMonth","getDate","getUTCFullYear","get","apiPath","done","result","e","postMessageContent","worker","status","Error","startLoad","toastStatusMessage","action","data","Worker","info","addEventListener","delayCheckSqlButton","downloadable","duration","estimatedTimeRemaining","fileSizeMiB","html","message","sqlButton","timeElapsed","totalTimeEstimate","updateUser","stopLoadError","isNumber","progress","exists","append","value","toFloat","push","mean","text","toInt","log","csv","error1","sqlDumpLocation","delay","replaceWith","close","debug","downloadDataUriAsBlob","safariDialogHelper","stopLoad","postMessage","stack","fail","urlString","download_path","importedCSS","htmlBody","htmlHeader","dialogHtml","pdfError","encodeURIComponent","on","this","remove","post","pdfDownload","pdfDownloadPath","file","after","always","click","isChecked","checked","_this"],"mappings":"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","file":"download.min.js"}