var checkInputTaxon,nodeClickEvent,plotRelationships;loadJS("bower_components/d3/d3.min.js",function(){return loadJS("https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js",function(){return loadJS("bower_components/alchemyjs/dist/alchemy.js",function(){return $("head").append("<link rel='stylesheet' href='bower_components/alchemyjs/dist/alchemy.min.css'>"),console.info("Alchemy ready"),$("#do-relationship-search").removeAttr("disabled")})})}),plotRelationships=function(n,e){var o,r;return null==n&&(n="rhinoceros unicornis"),null==e&&(e="bradypus tridactylus"),o={action:"relatedness",taxon1:null!=n?n:"rhinoceros unicornis",taxon2:null!=e?e:"bradypus tridactylus"},r=buildArgs(o),console.debug("Visiting","graphHandler.php?"+r),$.get("graphHandler.php",r,"json").done(function(n){var e;return window.alchemyResult=n,e={dataSource:n,directedEdges:!0,forceLayout:!1},alchemy.begin(e),delay(500,function(){return $("#alchemy .node.root circle").attr("r",15)}),!1}).error(function(n,e){return!1}),!1},nodeClickEvent=function(n){var e,o,r;return r=$(n).attr("id"),o=r.replace("node-",""),e={action:"id_details",id:o},$.get("graphHandler.php",buildArgs(e,"json")).done(function(n){return!isNull(n.label)&&(n.rank.lower(),!0)}).error(function(n,e){return!1}),!1},checkInputTaxon=function(n,e){var o,r;return null==n&&(n="#firstTaxon"),console.debug("About to check taxon..."),$(n).exists()?($(n).parent().removeClass("has-error"),r=$(n).val(),isNull(r)?(console.error("Blank taxon error"),bsAlert("No taxon provided for taxon 1","danger"),!1):(o={q:r,strict:!0},console.debug("About to ping api for taxon",r),$.get("api.php",buildArgs(o),"json").done(function(o){return console.debug("Got result"),!0===o.status&&o.count>0?("function"==typeof e&&e(),!0):(bsAlert("Invalid taxon: '"+r+"''","danger"),$(n).parent().addClass("has-error"),!1)}).fail(function(n,e){return console.error("Unable to ping the server")}),!1)):(console.error("Invalid selector"),!1)},$(function(){return $("#do-relationship-search").click(function(){var n,e,o,r;return console.debug("Clicked searcher"),n=$("#firstTaxon").val(),e=$("#secondTaxon").val(),o=isNull(n)?void 0:n,r=isNull(e)?void 0:e,checkInputTaxon("#firstTaxon",function(){return checkInputTaxon("#secondTaxon",function(){return console.debug("Passing",o,r),plotRelationships(o,r)})})}),$("#reset-graph").click(function(){return $("#alchemy").remove(),$("#alchemy-container").html('<div id="alchemy" class="alchemy" style="height: 75vh">\n</div>'),!1})});
//# sourceMappingURL=graph.min.js.map